<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type='text/css'>
body{
	font-family: 'Kite One', sans-serif;
}
 
div {
	border-style: solid;
    border-width: 2px;
	width:500px;
	margin:auto;
	padding: 20px;
}
.uno {
		line-height: 30px;  
	}
</style>

</head>
<body>
<form>
<br>
<br> 
 <div id="mitexto">
 En la granja, la vaca pasea tranquila por el prado, disfrutando del sol.
 La vaca es un animal muy importante, ya que nos da leche fresca cada mañana. 
 Junto a la vaca, la oveja se mueve de un lado a otro, pastando la hierba verde.
 Mientras tanto, la gallina picotea el suelo, buscando granos y semillas. La gallina también pone huevos,
 que son un alimento básico en la granja.
 Cada mañana, el granjero cuida de la vaca, la oveja y la gallina, 
 asegurándose de que estén bien alimentadas. La vaca, la oveja y la gallina forman parte 
 de la vida diaria en la granja. Los niños suelen jugar cerca de la vaca, acariciando su suave piel. 
 La oveja, con su blanca lana, también atrae la atención de los más pequeños. 
 Y, por supuesto, la gallina siempre corretea, haciendo que todos rían con sus saltitos.
 Así, en la granja, la vaca, la oveja y la gallina se convierten en los mejores amigos de todos, creando un ambiente alegre y lleno de vida.
 </div>
 <br>
<div>
Introduce una palabra para buscarla en el texto <br><br>
<input type="text" id="busca" size="10">  
  <input type="button" class="uno"  value="BUSCAR" onclick="buscar()"> 
</div>
<br>
<div>
Introduce dos palabras para reemplazar la primera por la segunda
<p>Busco <input type="text" id="pal1" size="10"> Reemplazo <input type="text" id="pal2" size="10"></p>
<input type="button" class="uno"  value="REEMPLAZAR" onclick="remplazar()"> 

</div>
 <br>
 <div>
  <input type="button" class="uno"  value="Poner en minúsculas" onclick="minus()">
  <input type="button" class="uno"  value="Poner en MAYÚSCULAS" onclick="mayus()">
  <input type="button" class="uno"  value="RESTAURAR" onclick="restaurar()">
</div>  
</form>

<script>


function buscar() {
    let texto = "";
    let palabra = "";
    let pos = 0, contador = 0;

    texto = document.getElementById("mitexto").innerHTML;
    palabra = document.getElementById("busca").value.trim();

    while ((pos = texto.indexOf(palabra, pos)) !== -1) {
        if (contador === 0) {
            alert("La palabra se encuentra en la posición " + pos + " y aparece " + (contador + 1) + " vez");
        } else {
            alert("La palabra se encuentra en la posición " + pos + " y aparece " + (contador + 1) + " veces");
        }
        contador++;
        pos++; // Aumento pos para buscar la siguiente palabra
    }

    if (contador === 0) {
        alert("La palabra " + palabra + " no se ha encontrado");
    }
}

function remplazar() {
    let texto = document.getElementById("mitexto").innerHTML;
    let palabra = document.getElementById("pal1").value.trim(); //Palabra a remplazar
    let remplazar = document.getElementById("pal2").value.trim(); //Palabra que remplaza

    let pos = texto.indexOf(palabra); //Saco la posicion de la palabra
    let contador = 0; //Inicializo el contador a 0

    while (pos != -1) {
        texto = texto.replace(palabra, remplazar); //En el texto remplazo las palabras
        contador++;
        pos = texto.indexOf(palabra); //Vuelvo a sacar la posicion de la palabra
    }

    if (contador === 0) {
        alert("La palabra " + palabra + " no se ha encontrado");
    } else {
        document.getElementById("mitexto").innerHTML = texto;
    }
}

function mayus(){
    let texto = "";
    texto = document.getElementById("mitexto").innerHTML;
    texto = (texto.toUpperCase());

    document.getElementById("mitexto").innerHTML = texto;
}

function minus(){
    let texto = "";
    texto = document.getElementById("mitexto").innerHTML;
    texto = (texto.toLowerCase());

    document.getElementById("mitexto").innerHTML = texto;
}

const texto = document.getElementById("mitexto").innerHTML;

function restaurar(){
    document.getElementById("mitexto").innerHTML = texto;
}

</script>

</body></html>
